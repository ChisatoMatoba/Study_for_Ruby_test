<div class="container">
  <div class="content">

<h3>問題 <%= @question.number %> :</h3>
    <%= markdown(@question.content) %>
    <div class="card mb-3">
      <ul id="choices", class="list-group list-group-flush">
        <% @choices.each_with_index do |choice, i| %>
          <li class="choice list-group-item" data-choice-id="<%= choice.id %>"><%= i + 1 %> : <%= markdown(choice.content) %></li>
        <% end %>
      </ul>
    </div>
    <div class="card border-light mb-3">
      <h5><div id="selected_choices", class="text-center"></div></h5>
      <button id="submit_answers", class="btn btn-outline-success">回答</button>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const choices = document.querySelectorAll('.choice');
    const selectedChoices = document.getElementById('selected_choices');

    choices.forEach(choice => {
      choice.addEventListener('click', function () {
        this.classList.toggle('selected');
        updateSelectedChoices();
      });
    });

    function updateSelectedChoices() {
      const selected = document.querySelectorAll('.choice.selected');
      selectedChoices.innerHTML = '選択: ' + Array.from(selected).map(el => el.getAttribute('data-choice-id')).join(', ');
    }

    function updateSelectedChoices() {
      const selected = document.querySelectorAll('.choice.selected');
      selectedChoices.innerHTML = '選択: ' + Array.from(selected).map(el => el.textContent.split(':')[0].trim()).join(', ');
    }

    document.getElementById('submit_answers').addEventListener('click', function() {
      const selected = document.querySelectorAll('.choice.selected');
      const selectedIds = Array.from(selected).map(el => el.getAttribute('data-choice-id'));
      // ここで選択されたIDをサーバーに送信する処理を追加
    });
  });
</script>

<style>
  .selected {
    background-color: #e0ffff; /* 選択状態の背景色 */
  }
</style>
